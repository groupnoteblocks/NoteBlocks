<!DOCTYPE html>
<!-- saved from url=(0022)http://www.jabingp.cn/ -->
<html lang="en"><!-- Head tag --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->





    <!--Author-->

    <meta name="author" content="JabinGP"/>


    <!--Open Graph Title-->

    <meta property="og:title" content="JabinGP Blog"/>


    <!--Open Graph Description-->


    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="JabinGP Blog"/>

    <!--Type page-->

    <meta property="og:type" content="website"/>


    <!--Page Cover-->


    <meta property="og:image" content="http://www.jabingp.cn/img/home-bg.jpg"/>


    <meta name="twitter:card" content="summary_large_image"/>




    <meta name="twitter:image" content="http://www.jabingp.cn/img/home-bg.jpg"/>


    <!-- Title -->

    <title>JabinGP Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="http://www.jabingp.cn/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->



    <!-- favicon -->

    <style>
        .addPost-title{
            font-size: 26px;
        }
        .addsub:hover{
            color: #bfbfbf;
        }
        .makeSure-background{
            opacity: 0.5;
            width: 100%; 
            position: fixed; 
            left: 0px; 
            top: 0px; 
            z-index: 1001;
            background: #000;
        
        }
        .addNote{
            margin: 0px auto;
            width:600px;
            height: 400px;
            position: fixed;
            left: 50%; 
            top: 60%;
            margin-left:-300px;
            margin-top:-200px; 
            z-index: 1002;

        }
        .addNote-title , .addNote-content{
            padding:10px;
            padding-left:23px;
            padding-right:15px;
            border-radius: 12px;
            border: none;
            width:600px;
            height: 300px;
            margin: 0 auto;
            display: block;
            outline: none;
            background: #fff;
        }

        .addNote-content{
            border-top-left-radius: 0px;
            border-top-right-radius: 0px;
        }
        .addNote-title{
            padding-right:70px;
            border-top-right-radius: 30px;
            border-bottom-left-radius: 0px;
            border-bottom-right-radius: 0px;
            background: #9bcd9b;
            color: #fff;
            height: 60px;
        }
        .addNote-button{
            border-top-right-radius: 12px;
            border:none;
            outline: none;
            position: absolute;
            top:0%;
            right:0%;
            height: 60px;
            background: #787878;
            color:#fff;
            padding-right:22px;
            padding-left:20px;
            padding-top:2px;
            padding-bottom: 0;
            font-size: 18px;   
        }
        .addNoteBtn{
            position: absolute;
            border: none;
            outline: none;
            background: #787878;
            color:#fff;
            height: 50px;
            width: 50px;
            border-radius: 50%;
            margin-left:20px; 
            margin-top:20px; 
        }
        .makeSure-background-invisible,.addNote-invisible{
            display: none;
        }
    </style>
</head>


<body>

        <!-- Menu -->
        <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://www.jabingp.cn/">Blog</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="http://www.jabingp.cn/">Home</a>
                        </li>
                        <li>
                            <a href="http://www.jabingp.cn/archives">Archives</a>
                        </li>
                        <li>
                            <a href="http://www.jabingp.cn/tags">Tags</a>
                        </li>
                        <li>
                            <a href="http://www.jabingp.cn/categories">Categories</a>
                        </li>
                        <li>
                            <a href="https://github.com/klugjo/hexo-theme-clean-blog"><i class="fa fa-github fa-stack-2x"></i></a>
                        </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
        <!-- Main Content -->
        <!-- Page Header -->
    <!-- Set your background image for this header in the theme's configuration: index_cover -->
    <header class="intro-header addHeader" style="background-image: url(&#39;home-bg.jpg&#39;)">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="site-heading">
                        <h1>A204 Blog</h1>
                        <hr class="small">
                        <span class="subheading">to share and record</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <button id ="addNoteBtn" class = "addNoteBtn">+</button>
            <div class="col-lg-10 col-lg-offset-1
                            col-md-8 col-md-offset-1
                            col-sm-12
                            col-xs-12
                            postlist-container
                            addpadding">
                           
                        </div>
            
        </div>
    </div>
    <div id="makeSure-background" class="makeSure-background-invisible"></div>
    <div id ="addNote" class="addNote-invisible">
            <button id = "addNote-button"class="addNote-button">√</button>
            <input type="text"  class="addNote-title"name="title" placeholder="标题">
            <textarea name="content" id="addNote-content" placeholder="内容" class="addNote-content" cols="30" rows="10"style="resize:none;"></textarea>
    </div>
        <hr>
</div>
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <p class="copyright text-muted">© 2018 JabinGP<br></p>
                </div>
            </div>
        </div>
    </footer>


        <!-- After footer scripts -->

        <!-- jQuery -->
        <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

        <!-- Bootstrap -->
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

        <!-- Gallery -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

        <!-- Disqus Comments -->
    <script>
        var addNoteBtn = document.getElementById("addNoteBtn");
        var addNoteFinishBtn = document.getElementById("addNote-button");
        var makeSureBackgroundDiv = document.getElementById("makeSure-background");
        var mainDiv = document.getElementsByClassName("postlist-container")[0];
        var oAjax = new XMLHttpRequest();//创建ajax对象
        var addNoteDiv = document.getElementById("addNote");
        var addNoteForm = document.getElementById("addNote-form");
        addNoteBtn.addEventListener("click",showAddNote,false);
        addNoteFinishBtn.addEventListener("click",invisiAddNote,false);
        function showAllNotes(){
            oAjax.open("GET","getAllNote",true);//加上t='+new Date().getTime()"的目的是为了消除缓存，每次的t的值不一样。
            //3.发送请求
            oAjax.send();
            //4.接收返回
            //客户端和服务器端有交互的时候会调用onreadystatechange
            oAjax.onreadystatechange=function(){
                    //oAjax.readyState  //浏览器和服务器，进行到哪一步了。
                        //0->（未初始化）：还没有调用 open() 方法。
                        //1->（载入）：已调用 send() 方法，正在发送请求。
                        //2->载入完成）：send() 方法完成，已收到全部响应内容。
                        //3->（解析）：正在解析响应内容。
                        //4->（完成）：响应内容解析完成，可以在客户端调用。
                if(oAjax.readyState==4)
                {
                    if(oAjax.status==200)//判断是否成功,如果是200，就代表成功
                    {
                        mainDiv.innerHTML="";
                        var data=JSON.parse(oAjax.responseText); //json解析方法JSON.parse 或者 eval('('+xhr.responseText+')')
                        for(var i in data){
                            mainDiv.innerHTML+="<div class=\"post-preview addPost-preview\"><h2 class=\"post-title addPost-title\">"
                            +data[i].title+"</h2><div class=\"post-content-preview addsub\">"
                            +data[i].content+"</div><a class=\"setTags\"  onclick=\"delNote("+data[i].number+")\">"
                            +"Num"+data[i].number+"·已完成√"+"</a><p class=\"post-meta addPost-meta\"><span class=\"myDiv\">"
                            +data[i].date.substring(0,10)+"</span></p></div>";
                        }
                        console.log("获取列表成功");//读取a.txt文件成功就弹出成功。后面加上oAjax.responseText会输出a.txt文本的内容
                    }
                    else
                    {
                        console.log("获取列表失败");
                    }
                }
            }
        }
        showAllNotes();
        function addNote(title,content){
            var xhr = new XMLHttpRequest();//创建ajax对象
            xhr.open("Post","saveNote",true);
            xhr.setRequestHeader( "Content-Type" , "application/x-www-form-urlencoded" );
            xhr.send("title="+title+"&content="+content);
            xhr.onreadystatechange=function(){
                if(xhr.readyState==4)
                {
                    if(xhr.status==200)//判断是否成功,如果是200，就代表成功
                    {
                        //var data=JSON.parse(xhr.responseText);
                        showAllNotes();
                       /* mainDiv.innerHTML+="<div class=\"post-preview addPost-preview\"><h2 class=\"post-title addPost-title\">"
                            +data.title+"</h2><div class=\"post-content-preview addsub\">"
                            +data.content+"</div><a class=\"setTags\"  onclick=\"delNote("+data.number+")\">"
                            +"Num"+data.number+"·已完成√"+"</a><p class=\"post-meta addPost-meta\"><span class=\"myDiv\">"
                            +data.date.substring(0,10)+"</span></p></div>";
                            */
                        console.log("保存成功");
                    }
                    else
                    {
                        console.log("保存失败");
                    }
                }
            }
        }
        function delNote(number){
            var xhr = new XMLHttpRequest();//创建ajax对象
            xhr.open("Get","delNoteByNumber?number="+number,true);
            xhr.send();
            xhr.onreadystatechange=function(){
                if(xhr.readyState==4)
                {
                    if(xhr.status==200)//判断是否成功,如果是200，就代表成功
                    {
                        showAllNotes();
                        console.log("删除"+number+"成功");
                    }
                    else
                    {
                        console.log("删除"+number+"失败");
                    }
                }
            }
        }
        function showAddNote(){
            makeSureBackgroundDiv.className="makeSure-background";
            addNoteDiv.className="addNote";
        }
        function invisiAddNote(){
            makeSureBackgroundDiv.className="makeSure-background-invisible";
            addNoteDiv.className="addNote-invisible";
            addNote(document.getElementsByClassName("addNote-title")[0].value,document.getElementsByClassName("addNote-content")[0].value);
            document.getElementsByClassName("addNote-title")[0].value="";
            document.getElementsByClassName("addNote-content")[0].value="";

        }
        
    </script>

</body>
</html>